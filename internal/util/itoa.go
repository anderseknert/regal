package util

import (
	"strconv"
)

const (
	digits       = "0123456789abcdefghijklmnopqrstuvwxyz"
	nSmalls      = 500
	smallsString = "00010203040506070809" +
		"10111213141516171819" +
		"20212223242526272829" +
		"30313233343536373839" +
		"40414243444546474849" +
		"50515253545556575859" +
		"60616263646566676869" +
		"70717273747576777879" +
		"80818283848586878889" +
		"90919293949596979899" +
		"100101102103104105106107108109" +
		"110111112113114115116117118119" +
		"120121122123124125126127128129" +
		"130131132133134135136137138139" +
		"140141142143144145146147148149" +
		"150151152153154155156157158159" +
		"160161162163164165166167168169" +
		"170171172173174175176177178179" +
		"180181182183184185186187188189" +
		"190191192193194195196197198199" +
		"200201202203204205206207208209" +
		"210211212213214215216217218219" +
		"220221222223224225226227228229" +
		"230231232233234235236237238239" +
		"240241242243244245246247248249" +
		"250251252253254255256257258259" +
		"260261262263264265266267268269" +
		"270271272273274275276277278279" +
		"280281282283284285286287288289" +
		"290291292293294295296297298299" +
		"300301302303304305306307308309" +
		"310311312313314315316317318319" +
		"320321322323324325326327328329" +
		"330331332333334335336337338339" +
		"340341342343344345346347348349" +
		"350351352353354355356357358359" +
		"360361362363364365366367368369" +
		"370371372373374375376377378379" +
		"380381382383384385386387388389" +
		"390391392393394395396397398399" +
		"400401402403404405406407408409" +
		"410411412413414415416417418419" +
		"420421422423424425426427428429" +
		"430431432433434435436437438439" +
		"440441442443444445446447448449" +
		"450451452453454455456457458459" +
		"460461462463464465466467468469" +
		"470471472473474475476477478479" +
		"480481482483484485486487488489" +
		"490491492493494495496497498499"
)

// Itoa works the same as strconv.Itoa, but with a larger range of numbers
// (0-499 compared to 0-99 using strconv.Itoa) that won't need an allocation
func Itoa(i int) string {
	if 0 <= i && i < nSmalls {
		if i < 10 {
			return digits[i : i+1]
		}
		if i < 100 {
			return smallsString[i*2 : i*2+2]
		}

		p := (i - 100) * 3

		return smallsString[200:][p : p+3]
	}

	return strconv.Itoa(i)
}
